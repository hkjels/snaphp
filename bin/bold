#!/usr/bin/env php
<?php

/**
 * Pre-requisits
 */

$args = implode($argv);
define('ROOT', dirname(__FILE__).'/..');

/**
 * Composer
 */

$composer = json_decode(file_get_contents(ROOT.'/composer.json'));

/**
 * Help / usage
 */

$help = <<<EOT

    Usage: bold [options] projectname

    Options:

        -m, --mvc         MVC structured project
        -t, --template    (jade|markdown|php). default=php
        -v, --version     Output framework version
        -h, --help        Output framework help

EOT;

/**
 * Help and version
 */

if (preg_match('/(\-v|\-\-version)/', $args)) exit("$composer->version\n");
if (preg_match('/(\-h|\-\-help)/', $args)) exit("$help\n");

/**
 * Arguments
 */

$mvc = preg_match ('/(\-m|\-\-mvc)/', $args);
if (preg_match('/(\-t|\-\-template)\.?(jade|php|markdown)\b/', $args, $matches)) {
  $template = $matches[2];
}
else $template = 'php';

/**
 * Model view controller
 */

if ($mvc) {

  /**
   * Application
   */

  $app = <<<EOT

  include 'vendor/autoload.php'

  /**
   * Initialize bold
   */

  $app = new Bold\Bold();

  /**
   * Routes
   */

  EOT;
}

/**
 * Functional
 */

else {}

